@page "/"
@inject IJSRuntime JSRuntime;
@using System.Drawing;
@using System.IO;

<div>
    <h1>Video Test</h1>
</div>

   
    <video id="video" playsinline autoplay muted="muted"></video>



<div>
    <button type="button" class="btn btn-primary" @onclick="StartVideo">Start Video</button>
    <button type="button" class="btn btn-primary" @onclick="StopVideo">Stop</button>
    <button type="button" class="btn btn-primary" @onclick="Mic">Mic</button>
</div>


@code {

    protected override Task OnInitializedAsync()
        {
            return base.OnInitializedAsync();
        }

       

 //protected override async Task OnAfterRenderAsync(bool firstRender)
 //   {
 //       Console.WriteLine($"Pre if {firstRender}");
//
 //       if (firstRender)
 //       {
 //       Console.WriteLine($"From if {firstRender}");
 //           //await StartVideo();
 //       }
 //   }

    void Click()
    {
        FileEditorExtensions.SetAppSettingValue();
    }
    async Task StartVideo()
    {
        await JSRuntime.InvokeVoidAsync("startVideo");
    }
        async Task Mic()
    {
        await JSRuntime.InvokeVoidAsync("muteMic");
    }
        async Task StopVideo()
    {
        await JSRuntime.InvokeVoidAsync("stopVideo");
    }

}